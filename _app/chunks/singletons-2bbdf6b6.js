import{C as n,s as t}from"./index-128c958e.js";const e=[];function s(s,o=n){let c;const i=[];function l(n){if(t(s,n)&&(s=n,c)){const n=!e.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),e.push(n,s)}if(n){for(let n=0;n<e.length;n+=2)e[n][0](e[n+1]);e.length=0}}}return{set:l,update:function(n){l(n(s))},subscribe:function(t,e=n){const u=[t,e];return i.push(u),1===i.length&&(c=o(l)||n),t(s),()=>{const n=i.indexOf(u);-1!==n&&i.splice(n,1),0===i.length&&(c(),c=null)}}}}let o;function c(n){o=n}export{c as i,o as r,s as w};
