var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,o)=>{for(var i in o||(o={}))t.call(o,i)&&n(e,i,o[i]);if(a)for(var i of a(o))r.call(o,i)&&n(e,i,o[i]);return e};import{w as i,r as s}from"./singletons-b4851f37.js";import{I as c}from"./index-8198fdb4.js";class u extends Error{constructor(e,t){super(t),this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body}}const d={BASE:"",VERSION:"0.1.0",WITH_CREDENTIALS:!1,TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0};function p(e){return null!=e}function l(e){return"string"==typeof e}function y(e){return l(e)&&""!==e}function f(e){return e instanceof Blob}function m(e){const t=e.path.replace(/[:]/g,"_"),a=`${d.BASE}${t}`;return e.query?`${a}${function(e){const t=[];return Object.keys(e).forEach((a=>{const r=e[a];p(r)&&(Array.isArray(r)?r.forEach((e=>{t.push(`${encodeURIComponent(a)}=${encodeURIComponent(String(e))}`)})):t.push(`${encodeURIComponent(a)}=${encodeURIComponent(String(r))}`))})),t.length>0?`?${t.join("&")}`:""}(e.query)}`:a}async function b(e,t){return"function"==typeof t?t(e):t}async function h(e){const t=await b(e,d.TOKEN),a=await b(e,d.USERNAME),r=await b(e,d.PASSWORD),n=await b(e,d.HEADERS),i=new Headers(o(o({Accept:"application/json"},n),e.headers));if(y(t)&&i.append("Authorization",`Bearer ${t}`),y(a)&&y(r)){const e=btoa(`${a}:${r}`);i.append("Authorization",`Basic ${e}`)}return e.body&&(f(e.body)?i.append("Content-Type",e.body.type||"application/octet-stream"):l(e.body)?i.append("Content-Type","text/plain"):i.append("Content-Type","application/json")),i}function w(e){return e.formData?function(e){const t=new FormData;return Object.keys(e).forEach((a=>{const r=e[a];p(r)&&t.append(a,r)})),t}(e.formData):e.body?l(e.body)||f(e.body)?e.body:JSON.stringify(e.body):void 0}async function C(e){const t=m(e),a=await async function(e,t){const a={method:e.method,headers:await h(e),body:w(e)};return await fetch(t,a)}(e,t),r=await async function(e){try{const t=e.headers.get("Content-Type");if(t)return t.toLowerCase().startsWith("application/json")?await e.json():await e.text()}catch(t){console.error(t)}return null}(a),n=function(e,t){if(t){const a=e.headers.get(t);if(l(a))return a}return null}(a,e.responseHeader),i={url:t,ok:a.ok,status:a.status,statusText:a.statusText,body:n||r};return function(e,t){const a=o({400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"},e.errors)[t.status];if(a)throw new u(t,a);if(!t.ok)throw new u(t,"Generic Error")}(e,i),i}class E{static async aicaciaIdWebControllerApiSignInUsernameOrEmailAndPasswordSignIn(e){return(await C({method:"POST",path:"/api/sign_in/username_or_email_and_password",body:e})).body}static async aicaciaIdWebControllerApiSignUpUsernameAndPasswordSignUp(e){return(await C({method:"POST",path:"/api/sign_up/username_and_password",body:e})).body}static async aicaciaIdWebControllerApiUserSignOut(){return(await C({method:"DELETE",path:"/api/user/current"})).body}static async aicaciaIdWebControllerApiUserCurrent(){return(await C({method:"GET",path:"/api/user/current"})).body}static async aicaciaIdWebControllerApiUserEmailCreate(e){return(await C({method:"POST",path:"/api/user/email",body:e})).body}static async aicaciaIdWebControllerApiUserEmailConfirm(){return(await C({method:"PATCH",path:"/api/user/email/confirm"})).body}static async aicaciaIdWebControllerApiUserEmailConfirm2(){return(await C({method:"PUT",path:"/api/user/email/confirm"})).body}static async aicaciaIdWebControllerApiUserEmailDelete(){return(await C({method:"DELETE",path:`/api/user/email/${id}`})).body}static async aicaciaIdWebControllerApiUserEmailSetPrimary(){return(await C({method:"PATCH",path:`/api/user/email/${id}/primary`})).body}static async aicaciaIdWebControllerApiUserEmailSetPrimary2(){return(await C({method:"PUT",path:`/api/user/email/${id}/primary`})).body}static async aicaciaIdWebControllerApiUserPasswordReset(e){return(await C({method:"PATCH",path:"/api/user/password/reset",body:e})).body}static async aicaciaIdWebControllerApiUserPasswordReset2(e){return(await C({method:"PUT",path:"/api/user/password/reset",body:e})).body}static async aicaciaIdWebControllerApiUserUsernameUpdate(e){return(await C({method:"PATCH",path:"/api/user/username",body:e})).body}static async aicaciaIdWebControllerApiUserUsernameUpdate2(e){return(await C({method:"PUT",path:"/api/user/username",body:e})).body}}
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
var A,U=(function(e,t){var a;a=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function a(r){function n(){}function o(t,a,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},n.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var i=JSON.stringify(a);/^[\{\[]/.test(i)&&(a=i)}catch(u){}a=r.write?r.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+a+s}}function i(e,a){if("undefined"!=typeof document){for(var n={},o=document.cookie?document.cookie.split("; "):[],i=0;i<o.length;i++){var s=o[i].split("="),c=s.slice(1).join("=");a||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),a)try{c=JSON.parse(c)}catch(d){}if(n[u]=c,e===u)break}catch(d){}}return e?n[e]:n}}return n.set=o,n.get=function(e){return i(e,!1)},n.getJSON=function(e){return i(e,!0)},n.remove=function(t,a){o(t,"",e(a,{expires:-1}))},n.defaults={},n.withConverter=a,n}((function(){}))},e.exports=a()}(A={exports:{}},A.exports),A.exports);const S={emails:[],id:null,inserted_at:null,updated_at:null,username:"guest"},g=i(S);async function I(e){const t=c(g);if(e&&t.token===e)return t;R(e);try{const e=await E.aicaciaIdWebControllerApiUserCurrent();return g.set(e),e}catch(a){throw O(),a}}async function v(){await E.aicaciaIdWebControllerApiUserSignOut(),O(),g.set(S)}function T(){return decodeURIComponent(U.get("aicacia-user-token"))}function R(e){d.HEADERS={Authorization:`Bearer ${e}`},U.set("aicacia-user-token",encodeURIComponent(e))}function O(){d.HEADERS=void 0,U.remove("aicacia-user-token")}d.BASE="https://api.id.aicacia.com";const P=async function(e,t){return s.goto(e,t,[])};export{E as U,I as a,T as b,R as c,P as g,v as s,g as u};
